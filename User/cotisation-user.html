<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tableau Vide avec Pagination Interactive</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body class="bg-light">

    <div class="container py-5 text-center">
        <button id="jeCotiseBtn" class="btn btn-dark btn-lg">
            Je cotise
        </button>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="cotisationModal" tabindex="-1" aria-labelledby="cotisationModalLabel"
        aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered p-5">
        <div class="modal-content">
            <div class="modal-body text-center border-end p-5">
                <!-- Ajout de "rounded-circle" -->
                <img id="photo" src="/Images/tontine.jpg" alt="Photo de profil" 
                     class="rounded-circle" style="width: 30%;">
                <h5 id="userName">Faly Seck</h5>
                <p>Ajouter une cotisation</p>
                <form id="cotisationForm">
                    <input type="date" class="form-control " id="cotisationDate" placeholder="Date" required>
                    <input type="number" class="form-control mt-3" id="cotisationMontant" placeholder="Montant"
                        required>
                    <button type="submit" class="btn btn-dark mt-3">Enregistrer</button>
               </form>
            </div>
        </div>
    </div>
</div>


    <!-- Tableau centré -->
    <div class="d-flex justify-content-center align-items-center" style="min-height: 70vh;">
        <div class="container my-5">
            <div class="table-container w-75 mx-auto">
                <table class="table table-hover align-middle">
                    <thead class="table-header">
                        <tr>
                            <th scope="col" style="background-color: #20DF7F;">Mois</th>
                            <th scope="col" style="background-color: #20DF7F;">Date début</th>
                            <th scope="col" style="background-color: #20DF7F;">Seuil</th>
                            <th scope="col" style="background-color: #20DF7F;">Statut</th>
                            <th scope="col" style="background-color: #20DF7F;">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="table-body">
                        <!-- Les lignes vides s'afficheront ici -->
                    </tbody>
                </table>
            </div>

            <!-- Pagination -->
            <nav class="mt-3">
                <ul class="pagination justify-content-center" id="pagination">
                    <li class="page-item"><a class="page-link" href="#" data-page="prev">Previous page</a></li>
                    <li class="page-item active"><a class="page-link" href="#" data-page="1">1</a></li>
                    <li class="page-item"><a class="page-link" href="#" data-page="2">2</a></li>
                    <li class="page-item"><a class="page-link" href="#" data-page="3">3</a></li>
                    <li class="page-item"><a class="page-link" href="#" data-page="4">4</a></li>
                    <li class="page-item"><a class="page-link" href="#" data-page="next">Next page</a></li>
                </ul>
            </nav>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const jeCotiseBtn = document.getElementById('jeCotiseBtn');
        const cotisationModal = new bootstrap.Modal(document.getElementById('cotisationModal'));
        const cotisationForm = document.getElementById('cotisationForm');
        const tableBody = document.getElementById("table-body");
        const pagination = document.getElementById("pagination");

        let currentPage = 1;
        const totalPages = 4;
        const rowsPerPage = 5;

        // Ouvrir modal quand on clique sur le bouton
        jeCotiseBtn.addEventListener('click', () => {
            cotisationModal.show();
        });

        // Soumission formulaire
        cotisationForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const date = document.getElementById('cotisationDate').value;
            const montant = document.getElementById('cotisationMontant').value;

            if (!date || !montant) {
                alert("Veuillez remplir la date et le montant !");
                return;
            }

            console.log("Cotisation ajoutée :", { date, montant });

            cotisationForm.reset();
            cotisationModal.hide();
            alert(`Cotisation de ${montant} ajoutée le ${date}`);
        });

        // Fonction pour remplir le tableau vide
        function renderTable(page) {
            tableBody.innerHTML = "";
            for (let i = 0; i < rowsPerPage; i++) {
                const row = `
                <tr>
                    <td class="text-center text-muted"></td>
                    <td class="text-center text-muted"></td>
                    <td class="text-center text-muted"></td>
                    <td class="text-center text-muted"></td>
                    <td>
                        <i class="fa-regular fa-eye me-2"></i>
                        <i class="fa-solid fa-pen-to-square"></i>
                    </td>
                </tr>`;
                tableBody.innerHTML += row;
            }
        }

        // Pagination
        function updatePagination(page) {
            if (page === "prev" && currentPage > 1) currentPage--;
            else if (page === "next" && currentPage < totalPages) currentPage++;
            else if (!isNaN(page)) currentPage = parseInt(page);

            pagination.querySelectorAll(".page-item").forEach(item => item.classList.remove("active"));
            pagination.querySelectorAll(".page-item").forEach(item => {
                const link = item.querySelector("a");
                if (link && link.dataset.page == currentPage) item.classList.add("active");
            });

            renderTable(currentPage);
        }

        pagination.addEventListener("click", function (e) {
            e.preventDefault();
            if (e.target.tagName === "A") updatePagination(e.target.dataset.page);
        });

        // Initialisation
        renderTable(currentPage);
    </script>
</body>

</html>
